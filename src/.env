# =============================================================================
# ESG資料提取系統環境配置文件 (.env)
# 請根據您的實際情況修改以下配置
# =============================================================================

# =============================================================================
# Google API配置 - 多API輪換支援
# =============================================================================

# 主要API Key（向後兼容，可選）
GOOGLE_API_KEY=AIzaSyAR8oJDZrvL6C44opQrm23xfepIZEVJyGI

# 多個API Keys（推薦使用，用逗號分隔，無空格）
# 請替換為您實際的API Keys
GEMINI_API_KEYS=AIzaSyAR8oJDZrvL6C44opQrm23xfepIZEVJyGI,AIzaSyDQs4bJr4VHcO5XZMHM5Gg3GKVSi7hifoU,AIzaSyBP3g6Ovbi0tgH2cekw3oUdrF-HoC3MLRQ,AIzaSyAM3Bn9USN6lIymEW9BwZfscY2H8eKPPvw

# 如果您只有一個API Key，可以這樣設置：
# GEMINI_API_KEYS=您的單個API_Key

# 如果您有不同數量的API Keys，範例：
# 2個Keys: GEMINI_API_KEYS=key1,key2
# 3個Keys: GEMINI_API_KEYS=key1,key2,key3
# 5個Keys: GEMINI_API_KEYS=key1,key2,key3,key4,key5

# =============================================================================
# AI模型配置
# =============================================================================

# Gemini模型版本（推薦使用flash版本，速度快且成本低）
GEMINI_MODEL=gemini-1.5-flash

# 其他可選模型：
# GEMINI_MODEL=gemini-1.5-pro      # 更強但較慢且昂貴
# GEMINI_MODEL=gemini-1.0-pro      # 舊版本

# Embedding模型（用於向量搜索，建議保持默認）
EMBEDDING_MODEL=BAAI/bge-large-zh-v1.5

# 重排序模型（可選，用於結果重排序）
RERANKER_MODEL=BAAI/bge-reranker-base

# =============================================================================
# 路徑配置
# =============================================================================

# 向量資料庫路徑（存儲PDF的向量化數據）
VECTOR_DB_PATH=./vector_db/esg_db

# 數據路徑（放置PDF文件的目錄）
DATA_PATH=./data

# 結果路徑（Excel結果文件的輸出目錄）
RESULTS_PATH=./results

# =============================================================================
# 文本處理參數
# =============================================================================

# 文本分割大小（每個文本塊的字符數）
CHUNK_SIZE=800

# 文本重疊大小（相鄰文本塊的重疊字符數）
CHUNK_OVERLAP=150

# =============================================================================
# 搜索和匹配參數
# =============================================================================

# 向量搜索返回的文檔數量
SEARCH_K=10

# 重排序後保留的文檔數量
RERANK_K=3

# 信心分數閾值（0.0-1.0，越高越嚴格）
CONFIDENCE_THRESHOLD=0.5

# =============================================================================
# API管理參數（多API輪換優化）
# =============================================================================

# 最小請求間隔（秒）- 降低以提高速度，但可能觸發限制
MIN_REQUEST_INTERVAL=1

# API冷卻時間（分鐘）- API被限制後的等待時間
API_COOLDOWN_MINUTES=1

# 輪換閾值（每多少次請求強制輪換API）
API_ROTATION_THRESHOLD=15

# 隨機輪換機率（0.0-1.0）
API_RANDOM_ROTATION_CHANCE=0.15

# =============================================================================
# 系統優化參數
# =============================================================================

# 最大處理文檔數（限制單次處理的文檔數量以控制成本）
MAX_DOCS_PER_RUN=200

# 是否啟用詳細日誌（true/false）
ENABLE_VERBOSE_LOGGING=false

# 是否啟用調試模式（true/false）
ENABLE_DEBUG_MODE=false

# 批次處理大小（每批處理的提取結果數量）
BATCH_SIZE=50

# =============================================================================
# 高級功能配置
# =============================================================================

# 是否啟用自動去重（true/false）
ENABLE_AUTO_DEDUPE=true

# 去重相似度閾值（0.0-1.0）
DEDUPE_SIMILARITY_THRESHOLD=0.8

# 是否啟用LLM增強（true/false）
ENABLE_LLM_ENHANCEMENT=true

# LLM重試次數
LLM_MAX_RETRIES=3

# =============================================================================
# 快取配置（可選）
# =============================================================================

# 是否啟用結果快取（true/false）
ENABLE_CACHE=false

# 快取過期時間（小時）
CACHE_EXPIRY_HOURS=24

# =============================================================================
# 郵件通知配置（可選，用於長時間處理的通知）
# =============================================================================

# 是否啟用郵件通知（true/false）
ENABLE_EMAIL_NOTIFICATION=false

# SMTP設置（如果啟用郵件通知）
# SMTP_SERVER=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USERNAME=your_email@gmail.com
# SMTP_PASSWORD=your_app_password
# NOTIFY_EMAIL=recipient@gmail.com

# =============================================================================
# 備註和說明
# =============================================================================

# 如何獲取Google API Key：
# 1. 訪問：https://makersuite.google.com/app/apikey
# 2. 登入Google帳戶
# 3. 點擊「Create API Key」
# 4. 複製生成的API Key
# 5. 將API Key貼到上面的GEMINI_API_KEYS中

# 多API Key的優勢：
# - 提高處理速度（避免單API限制）
# - 增強系統穩定性（一個API故障時自動切換）
# - 增加配額（多個API的總配額更大）

# 推薦配置：
# - 小型項目：2-3個API Keys
# - 中型項目：4-6個API Keys
# - 大型項目：8-10個API Keys

# 性能調優建議：
# - MIN_REQUEST_INTERVAL：高速=0.5，平衡=0.8，保守=1.5
# - API_ROTATION_THRESHOLD：頻繁輪換=10，平衡=15，少輪換=25
# - CONFIDENCE_THRESHOLD：嚴格=0.7，平衡=0.5，寬鬆=0.3

# 成本控制：
# - MAX_DOCS_PER_RUN：控制單次處理的文檔數量
# - ENABLE_LLM_ENHANCEMENT：可設為false以節省API調用
# - BATCH_SIZE：較大的批次可能更高效

# 故障排除：
# - 如果API調用失敗，檢查API Key是否有效
# - 如果輪換不生效，降低API_ROTATION_THRESHOLD
# - 如果結果太少，降低CONFIDENCE_THRESHOLD
# - 如果結果太多無關，提高CONFIDENCE_THRESHOLD